function init(){camera=new THREE.PerspectiveCamera(75,container.offsetWidth/container.offsetHeight,1,5e3),camera.position.z=1e3,scene=new THREE.Scene;for(var a=new THREE.SpriteMaterial({map:new THREE.Texture(generateSprite()),blending:THREE.AdditiveBlending}),b=0;1e3>b;b++)particle=new THREE.Sprite(a),initParticle(particle,10*b),scene.add(particle);renderer=new THREE.CanvasRenderer,renderer.setClearColor(64),renderer.setSize(container.offsetWidth,container.offsetHeight),container.appendChild(renderer.domElement),document.addEventListener("mousemove",onDocumentMouseMove,!1),window.addEventListener("resize",onWindowResize,!1)}function onWindowResize(){windowHalfX=container.offsetWidth/2,windowHalfY=container.offsetHeight/2,camera.aspect=container.offsetWidth/container.offsetHeight,camera.updateProjectionMatrix(),renderer.setSize(container.offsetWidth,container.offsetHeight)}function generateSprite(){var a=document.createElement("canvas");a.width=16,a.height=16;var b=a.getContext("2d"),c=b.createRadialGradient(a.width/2,a.height/2,0,a.width/2,a.height/2,a.width/2);return c.addColorStop(0,"rgba(255,255,255,1)"),c.addColorStop(.2,"rgba(0,255,255,1)"),c.addColorStop(.4,"rgba(0,0,64,1)"),c.addColorStop(1,"rgba(0,0,0,1)"),b.fillStyle=c,b.fillRect(0,0,a.width,a.height),a}function initParticle(a,b){var a=this instanceof THREE.Sprite?this:a,b=void 0!==b?b:0;a.position.set(0,0,0),a.scale.x=a.scale.y=32*Math.random()+16,new TWEEN.Tween(a).delay(b).to({},1e4).onComplete(initParticle).start(),new TWEEN.Tween(a.position).delay(b).to({x:4e3*Math.random()-2e3,y:1e3*Math.random()-500,z:4e3*Math.random()-2e3},1e4).start(),new TWEEN.Tween(a.scale).delay(b).to({x:0,y:0},1e4).start()}function onDocumentMouseMove(a){mouseX=a.clientX-windowHalfX,mouseY=a.clientY-windowHalfY}function onDocumentTouchStart(a){1==a.touches.length&&(a.preventDefault(),mouseX=a.touches[0].pageX-windowHalfX,mouseY=a.touches[0].pageY-windowHalfY)}function onDocumentTouchMove(a){1==a.touches.length&&(a.preventDefault(),mouseX=a.touches[0].pageX-windowHalfX,mouseY=a.touches[0].pageY-windowHalfY)}function animate(){requestAnimationFrame(animate),render()}function render(){TWEEN.update(),camera.position.x+=.05*(mouseX-camera.position.x),camera.position.y+=.05*(-mouseY-camera.position.y),camera.lookAt(scene.position),renderer.render(scene,camera)}!function(){for(var a,b=function(){},c=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeStamp","trace","warn"],d=c.length,e=window.console=window.console||{};d--;)a=c[d],e[a]||(e[a]=b)}(),function(){for(var a=0,b=["ms","moz","webkit","o"],c=0;c<b.length&&!window.requestAnimationFrame;++c)window.requestAnimationFrame=window[b[c]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[b[c]+"CancelAnimationFrame"]||window[b[c]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(b){var c=(new Date).getTime(),d=Math.max(0,16-(c-a)),e=window.setTimeout(function(){b(c+d)},d);return a=c+d,e}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(a){clearTimeout(a)})}();var container=document.getElementById("site-head"),camera,scene,renderer,particle,mouseX=0,mouseY=0,windowHalfX=container.offsetWidth/2,windowHalfY=container.offsetHeight/2;init(),animate();